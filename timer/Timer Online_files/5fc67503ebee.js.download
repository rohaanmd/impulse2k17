$(function(){var g,c,m,d,q="",e=[{element:$("#hour"),input_element:$("#id_dt_1"),value:36E5},{element:$("#minute"),input_element:$("#id_dt_2"),value:6E4},{element:$("#second"),input_element:$("#id_dt_3"),value:1E3}],r=$("#alarm"),k=$("#button-start-stop"),t=$("#button-reset"),u=$("#button-set"),n=$(".unit_value:visible"),p=function(){for(var a="",b=g,c=0;c<e.length;++c){var d=e[c],f=Math.abs(Math.floor(b/d.value)),b=b%d.value,f=10>f?"0"+f:f;d.element.html("&#8201;"+f+"&#8201;");a+=f}q.length!=a.length&&
window.fit_fonts();q=a},v=function(){g=m-Date.now();0<=g?p():(clearInterval(d),r.attr("src","/static/alarm.mp3"),r.get(0).play(),g=0,p(),n.css("color","red"),h(!0))},h=function(a){a?k.text("START"):k.text("STOP");t.prop("disabled",!a);u.prop("disabled",!a);for(var b=0;b<e.length;++b)e[b].input_element.prop("disabled",!a)},l=function(){for(var a=c=0;a<e.length;++a){var b=e[a];c+=b.value*parseInt(b.input_element.val())}g=c;p();n.css("color","black")},x=function(){clearInterval(d);l();h(!0)},y=function(){"START"===
k.text()?w():(clearInterval(d),c=m-Date.now(),h(!0))},w=function(){clearInterval(d);l();m=Date.now()+c;n.css("color","black");h(!1);v();d=window.setInterval(v,50)};window.timer=function(a){l();$(window).resize(window.fit_fonts);u.click(l);t.click(x);k.click(y);a?w():h(!0)}});
